# Changelog - 2025-08-18

## Security Enhancements

- [2025-08-18] [Security] Added encryption for SMTP passwords in system settings
  - Updated `encryption-service.ts` to include `smtpPassword` in sensitive settings list
  - Modified `SystemStorage` class to encrypt/decrypt sensitive system settings
  - Updated `getSmtpSettings()` function in `email.ts` to handle decrypted passwords
  - Created migration script `encrypt-smtp-passwords.ts` to encrypt existing unencrypted passwords
  - Sensitive system settings (like `smtpPassword` and `openaiApiKey`) are now encrypted at rest using AES-256-GCM
  - **FIXED**: Updated main `DatabaseStorage` class in `storage.ts` to properly encrypt/decrypt sensitive settings

## Bug Fixes

- [2025-08-18] [Bug Fix] Fixed SMTP port validation error in admin dashboard
  - Fixed type mismatch issue where SMTP port was sometimes returned as a number but expected as a string
  - Updated `SmtpSettings` component to always convert port to string before validation
  - Modified interfaces to accept both string and number types for `smtpPort`
  - Ensures consistent string type when saving settings to backend

## UI Improvements

- [2025-08-18] [Feature] Added show/hide password toggle to SMTP password field
  - Added Eye/EyeOff icon button to toggle password visibility
  - Improved user experience when entering SMTP credentials
  - Added proper accessibility labels for the toggle button

## Toast Styling Consistency Update

- [2025-08-18] [UI] Updated toast component styling to match status badge colors for consistency
  - Fixed Tailwind CSS 4 compatibility issues by using explicit hex colors in components.css
  - Light mode: Soft colored backgrounds (blue-100, green-100, red-100, orange-100)
  - Dark mode: Solid slate-800 base with subtle color overlays using linear gradients
  - Updated border colors to match status badge patterns
  - Changed default variant from "default" to "info" with blue styling
  - Fixed translucency issue - toasts now have solid backgrounds for better readability
  - Ensured proper dark mode support with layered backgrounds (solid base + color tint)

- [2025-08-18] [Feature] Added proper toast variants across the application
  - Updated WorkflowListClient to use `variant: "success"` for successful operations
  - Updated ApiTokensManager to use appropriate variants (success for CRUD, info for copy)
  - Updated admin/users-management with success variants for user operations
  - Updated event components with success variants for save/update operations
  - Changed partial success messages to use `variant: "info"` instead of destructive
  - Established toast variant guidelines:
    - **success** (green): Create, update, delete, save operations
    - **destructive** (red): Errors and failures
    - **warning** (amber): Warnings and timeout states
    - **info** (blue): Copy operations, downloads, notifications, and default messages
