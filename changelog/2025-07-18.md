# Changelog for 2025-07-18

- [2025-07-18] [Refactor] Implemented events.ts storage module with all event-related methods from storage.ts
  - Moved 11 Event CRUD methods: getEvent, getEventWithRelations (with optimized and simple variants), getActiveEventsWithRelations, getAllEvents, getEventsByServerId, canViewEvent, canEditEvent, createScript, updateScript, deleteScript
  - Moved 11 Conditional Action methods: getSuccessActions, getFailActions, getAlwaysActions, getConditionActions, createAction, deleteActionsByEventId, deleteSuccessEventsByScriptId, deleteFailEventsByScriptId, deleteAlwaysEventsByScriptId, deleteConditionEventsByScriptId, getConditionalActionsByEventId
  - Note: Environment variable methods (getEnvVars, createEnvVar) remain in the variables module as per the storage module architecture
  - Kept private deleteEnvVarsByEventId method in events module for deleteScript dependency
- [2025-07-18] [Refactor] Implemented workflow-execution.ts storage module with all execution tracking methods from storage.ts
  - Implemented 4 Workflow Log methods: getWorkflowLog, getWorkflowLogs, createWorkflowLog, updateWorkflowLog (lines 2026-2082)
  - Implemented 5 Workflow Execution methods: getWorkflowExecution, getWorkflowExecutions, getUserWorkflowExecutions, createWorkflowExecution, updateWorkflowExecution (lines 2085-2196)
  - Implemented 4 Workflow Execution Event methods: createWorkflowExecutionEvent, getWorkflowExecutionEvents, updateWorkflowExecutionEvent (lines 2199-2257)
  - Added proper imports for database tables, Drizzle ORM utilities, and type definitions
  - Implemented complex joins in getWorkflowExecutionEvents to include event name and type from events table
  - Fixed getUserWorkflowExecutions to properly join with workflows table for user filtering
  - Total 388 lines of fully functional code replacing stub implementation
- [2025-07-18] [Bug Fix] Fixed type error in LogsPageClient by correcting Event type mapping
  - Fixed import to use proper Event type (aliased as DbEvent) from @/shared/schema
  - Replaced non-existent 'script' field with correct 'content' field
  - Added all required Event fields with proper defaults to match database schema
  - Updated Workflow type mapping to include all required fields
  - Imported necessary enum types (EventType, EventStatus, etc.) for type-safe defaults
  - Changed hardcoded string values to use proper enum constants
- [2025-07-18] [Bug Fix] Fixed all TypeScript linting errors in script files
  - Fixed unsafe any assignments by adding proper type annotations
  - Fixed unused variables by either removing or prefixing with underscore
  - Fixed floating promises by adding void operator
  - Fixed template literal type safety issues with proper type guards and nullish coalescing
  - Fixed type-only imports using import type syntax
  - Fixed unnecessary type assertions by relying on TypeScript's type inference
  - Fixed tools.ts router to handle missing description/tags fields safely
